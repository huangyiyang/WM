webpackJsonp([0],{"4hpL":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("pFYg"),s=a.n(i),l=a("mtWM"),n=a.n(l),o={getAbsolutelyPosition:function(e){var t=e.getBoundingClientRect(),a=Math.max(document.documentElement.scrollTop,document.body.scrollTop),i=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);return{left:t.left+i,top:t.top+a}},getElementLineIndex:function(e,t){for(var a=1,i=[].slice.call(e.children),s=0;s<i.length;s+=1)if(i[s]===t)return a=s+1;return a},getTopParentPath:function(e){var t="",a=e.nodeName.toLowerCase();if("html"===a)return t;var i=e.className.split(" "),s=""===(i=i.filter(function(e){return e&&e.trim()}).join("."))?"":"."+i,l=":nth-child("+this.getElementLineIndex(e.parentNode,e)+")";return t=a+s,t="body"===a?t:this.getTopParentPath(e.parentNode)+">"+t+l}},c={name:"projectLogin",data:function(){return{currentConfig:"base",detailData:{id:"",autoLoginName:"",targetUrl:"",targetUrlLoadTime:"",isHold:0,user:{setElementValue:"",elementPath:"",elementPathType:""},pass:{setElementValue:"",elementPath:"",elementPathType:""},submit:{elementPath:"",elementPathType:""},loginDelayTime:"",testSucessContainValue:"",testSuccessUrl:"",testSuccessUrlLoadTime:"",isCustomTestSuccess:0,customTestSuccessScript:"",success:{elementPath:"",elementPathType:"",valuSaveAsType:""},isCaptcha:0,captchaGet:{elementPath:"",elementPathType:""},captchaInput:{elementPath:"",elementPathType:""},captchaImg:{elementPath:"",elementPathType:""},captchaRefresh:{elementPath:"",elementPathType:""},isCustom:0,customScript:""},pathType:[],valueName:[],isSelect:"",sPath:"",parentNodeX:"",parentNodeY:""}},computed:{holdLogin:{get:function(){return Boolean(this.detailData.isHold)},set:function(e,t){this.detailData.isHold=e?1:0}},isCaptcha:{get:function(){return Boolean(this.detailData.isCaptcha)},set:function(e,t){this.detailData.isCaptcha=e?1:0}}},created:function(){this.loginDetail(),this.loginSelect()},watch:{$route:function(e,t){this.isSelect="",this.loginDetail()}},directives:{blank:{bind:function(e,t,a){function i(a){if(e.contains(a.target))return!1;t.expression&&t.value(a)}e.__vueClickOutside__=i,document.addEventListener("click",i)},update:function(){},unbind:function(e,t){document.removeEventListener("click",e.__vueClickOutside__),delete e.__vueClickOutside__}}},methods:{changeConfig:function(e){this.currentConfig=e},loginDetail:function(){var e=this;if(this.$route.query.id){var t=new URLSearchParams;t.append("id",this.$route.query.id),this.$axios.post("/autoLogin/detail",t,function(t){for(var a in t.data)if("object"===s()(t.data[a]))for(var i in t.data[a])e.detailData[a][i]=t.data[a][i];else e.detailData[a]=t.data[a];e.$nextTick(function(){e.iFrameLoad(e.iFrameShow)})})}else this.detailData={id:"",autoLoginName:"",targetUrl:"",targetUrlLoadTime:"",isHold:0,user:{setElementValue:"",elementPath:"",elementPathType:""},pass:{setElementValue:"",elementPath:"",elementPathType:""},submit:{elementPath:"",elementPathType:""},loginDelayTime:"",testSucessContainValue:"",testSuccessUrl:"",testSuccessUrlLoadTime:"",isCustomTestSuccess:0,customTestSuccessScript:"",success:{elementPath:"",elementPathType:"",valuSaveAsType:""},isCaptcha:0,captchaGet:{elementPath:"",elementPathType:""},captchaInput:{elementPath:"",elementPathType:""},captchaImg:{elementPath:"",elementPathType:""},captchaRefresh:{elementPath:"",elementPathType:""},isCustom:0,customScript:""}},loginSelect:function(){var e=this;this.$axios.post("/autoLogin/selectData","",function(t){e.pathType=t.pathTypes,e.valueName=t.valueNames})},getPath:function(e){this.isSelect=e},blankClick:function(e){window.selectMask.remove()},autoLoginSave:function(){var e=this,t=new URLSearchParams;for(var a in this.detailData)if("object"===s()(this.detailData[a]))for(var i in this.detailData[a])t.append(a+"."+i,this.detailData[a][i]);else"createdTime"!==a&&"createUser"!==a&&t.append(a,this.detailData[a]);this.$axios.post("/autoLogin/save",t,function(t){e.$message.success(t.message),e.$route.query.id||e.$emit("update-list",!0)})},iFrameLoad:function(e){var t=document.getElementById("iframe"),a=t.contentWindow.document;if(this.$route.query.id){var i="snapshot_url="+this.detailData.targetUrl,s="&snapshot_login_id="+this.detailData.id,l=this.baseConfig.TAILOR_URL+"/tailor/wisemotion/snapshot?"+i+s+"&snapshot_test_success=1";n.a.get(l).then(function(i){a.body.innerHTML=i.data,t.style.height=a.body.offsetHeight,console.log(a.body.offsetHeight),e&&e()})}else setTimeout(function(){a.body.innerHTML=""},4)},maskClick:function(e){e.preventDefault(),this.detailData[this.isSelect].elementPath=this.sPath,window.selectMask.remove()},mouseEvent:function(e){e.preventDefault();var t=(e||window.event).target,a=this.parentNodeX+1*o.getAbsolutelyPosition(t).left,i=this.parentNodeY+1*o.getAbsolutelyPosition(t).top,s=1*t.offsetWidth,l=1*t.offsetHeight,n=t.nodeName.toLowerCase(),c=(""===t.id?"":"#"+t.id)+(""===t.className?"":"."+t.className);this.isSelect&&(window.selectMask.show(s,l,a,i,"rgba(101, 177, 247, 0.5)",n,c),this.sPath=o.getTopParentPath(t))},iFrameShow:function(){var e=document.getElementById("iframe"),t=e.contentWindow.document;this.parentNodeX=1*o.getAbsolutelyPosition(e.parentNode).left,this.parentNodeY=1*o.getAbsolutelyPosition(e.parentNode).top,this.iFrameRemove(),t.addEventListener("mousemove",this.mouseEvent,!1),document.getElementById("iMask").addEventListener("click",this.maskClick),t.addEventListener("click",function(e){e.preventDefault()})},iFrameRemove:function(){document.getElementById("iframe").contentWindow.document.removeEventListener("mousemove",this.mouseEvent,!1),document.getElementById("iMask").removeEventListener("click",this.maskClick)}},mounted:function(){},destroyed:function(){this.iFrameRemove()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"management-list-except project-login"},[a("section",{staticClass:"project-header"},[a("p",{staticClass:"project-header-name"},[e._v("\n      登录管理 "),a("span",[e._v("["+e._s(e.detailData.autoLoginName||"新增登录")+"]")])]),e._v(" "),a("div",{staticClass:"rt"},[a("el-button",{attrs:{type:"primary"},on:{click:e.autoLoginSave}},[e._v("保存")])],1)]),e._v(" "),a("section",{staticClass:"project-info"},[a("p",{staticClass:"project-title"},[a("span",{class:{active:"base"===e.currentConfig},on:{click:function(t){e.changeConfig("base")}}},[e._v("基本配置")]),e._v("\n      -\n      "),a("span",{class:{active:"code"===e.currentConfig},on:{click:function(t){e.changeConfig("code")}}},[e._v("验证码设置")]),e._v(" "),a("el-switch",{attrs:{"active-color":"#0487fe","inactive-color":"#ccd0d3","active-text":"是否自定义","active-value":1,"inactive-value":0},model:{value:e.detailData.isCustom,callback:function(t){e.$set(e.detailData,"isCustom",t)},expression:"detailData.isCustom"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.detailData.isCustom,expression:"detailData.isCustom === 1"}],staticClass:"project-list line"},[a("div",{staticClass:"project-list-row"},[a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("名称：")]),e._v(" "),a("el-input",{model:{value:e.detailData.autoLoginName,callback:function(t){e.$set(e.detailData,"autoLoginName",t)},expression:"detailData.autoLoginName"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("登录URL：")]),e._v(" "),a("el-input",{on:{blur:e.iFrameLoad},model:{value:e.detailData.targetUrl,callback:function(t){e.$set(e.detailData,"targetUrl",t)},expression:"detailData.targetUrl"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("加载时间：")]),e._v(" "),a("el-input",{model:{value:e.detailData.targetUrlLoadTime,callback:function(t){e.$set(e.detailData,"targetUrlLoadTime",t)},expression:"detailData.targetUrlLoadTime"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("el-checkbox",{model:{value:e.holdLogin,callback:function(t){e.holdLogin=t},expression:"holdLogin"}},[e._v("保持登录")])],1)]),e._v(" "),a("div",{staticClass:"project-list-row all"},[a("label",{attrs:{for:""}},[e._v("自定义脚本：")]),e._v(" "),a("el-input",{attrs:{type:"textarea",rows:5,resize:"none",placeholder:"请输入自定义获取脚本"},model:{value:e.detailData.customScript,callback:function(t){e.$set(e.detailData,"customScript",t)},expression:"detailData.customScript"}})],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"base"===e.currentConfig&&0===e.detailData.isCustom,expression:"currentConfig === 'base' && detailData.isCustom === 0"}],staticClass:"project-list line"},[a("div",{staticClass:"project-list-row"},[a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("名称：")]),e._v(" "),a("el-input",{model:{value:e.detailData.autoLoginName,callback:function(t){e.$set(e.detailData,"autoLoginName",t)},expression:"detailData.autoLoginName"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("登录URL：")]),e._v(" "),a("el-input",{on:{blur:e.iFrameLoad},model:{value:e.detailData.targetUrl,callback:function(t){e.$set(e.detailData,"targetUrl",t)},expression:"detailData.targetUrl"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("加载时间：")]),e._v(" "),a("el-input",{model:{value:e.detailData.targetUrlLoadTime,callback:function(t){e.$set(e.detailData,"targetUrlLoadTime",t)},expression:"detailData.targetUrlLoadTime"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("el-checkbox",{model:{value:e.holdLogin,callback:function(t){e.holdLogin=t},expression:"holdLogin"}},[e._v("保持登录")])],1)]),e._v(" "),e.detailData.user?a("div",{staticClass:"project-list-row"},[a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("用户名：")]),e._v(" "),a("el-input",{model:{value:e.detailData.user.setElementValue,callback:function(t){e.$set(e.detailData.user,"setElementValue",t)},expression:"detailData.user.setElementValue"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("路径：")]),e._v(" "),a("el-input",{class:{active:"user"===e.isSelect},on:{focus:function(t){e.getPath("user")}},model:{value:e.detailData.user.elementPath,callback:function(t){e.$set(e.detailData.user,"elementPath",t)},expression:"detailData.user.elementPath"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("路径类型：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.detailData.user.elementPathType,callback:function(t){e.$set(e.detailData.user,"elementPathType",t)},expression:"detailData.user.elementPathType"}},e._l(e.pathType,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1)]):e._e(),e._v(" "),e.detailData.pass?a("div",{staticClass:"project-list-row"},[a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("密码：")]),e._v(" "),a("el-input",{model:{value:e.detailData.pass.setElementValue,callback:function(t){e.$set(e.detailData.pass,"setElementValue",t)},expression:"detailData.pass.setElementValue"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("路径：")]),e._v(" "),a("el-input",{class:{active:"pass"===e.isSelect},on:{focus:function(t){e.getPath("pass")}},model:{value:e.detailData.pass.elementPath,callback:function(t){e.$set(e.detailData.pass,"elementPath",t)},expression:"detailData.pass.elementPath"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("路径类型：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.detailData.pass.elementPathType,callback:function(t){e.$set(e.detailData.pass,"elementPathType",t)},expression:"detailData.pass.elementPathType"}},e._l(e.pathType,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1)]):e._e(),e._v(" "),e.detailData.submit?a("div",{staticClass:"project-list-row"},[a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("提交：")]),e._v(" "),a("el-input",{class:{active:"submit"===e.isSelect},on:{focus:function(t){e.getPath("submit")}},model:{value:e.detailData.submit.elementPath,callback:function(t){e.$set(e.detailData.submit,"elementPath",t)},expression:"detailData.submit.elementPath"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("路径类型：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.detailData.submit.elementPathType,callback:function(t){e.$set(e.detailData.submit,"elementPathType",t)},expression:"detailData.submit.elementPathType"}},e._l(e.pathType,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("登录时延：")]),e._v(" "),a("el-input",{model:{value:e.detailData.loginDelayTime,callback:function(t){e.$set(e.detailData,"loginDelayTime",t)},expression:"detailData.loginDelayTime"}})],1)]):e._e()]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"code"===e.currentConfig&&0===e.detailData.isCustom,expression:"currentConfig === 'code' && detailData.isCustom === 0"}],staticClass:"project-list line"},[a("div",{staticClass:"project-list-row"},[e.detailData.captchaGet?[a("div",{staticClass:"third"},[a("label",{attrs:{for:""}},[e._v("获取验证码路径：")]),e._v(" "),a("el-input",{class:{active:"captchaGet"===e.isSelect},on:{focus:function(t){e.getPath("captchaGet")}},model:{value:e.detailData.captchaGet.elementPath,callback:function(t){e.$set(e.detailData.captchaGet,"elementPath",t)},expression:"detailData.captchaGet.elementPath"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("路径类型：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.detailData.captchaGet.elementPathType,callback:function(t){e.$set(e.detailData.captchaGet,"elementPathType",t)},expression:"detailData.captchaGet.elementPathType"}},e._l(e.pathType,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1)]:e._e(),e._v(" "),a("div",{staticClass:"quarter"},[a("el-checkbox",{model:{value:e.isCaptcha,callback:function(t){e.isCaptcha=t},expression:"isCaptcha"}},[e._v("启用验证码登录")])],1)],2),e._v(" "),e.detailData.captchaInput?a("div",{staticClass:"project-list-row"},[a("div",{staticClass:"third"},[a("label",{attrs:{for:""}},[e._v("验证码输入框路径：")]),e._v(" "),a("el-input",{class:{active:"captchaInput"===e.isSelect},on:{focus:function(t){e.getPath("captchaInput")}},model:{value:e.detailData.captchaInput.elementPath,callback:function(t){e.$set(e.detailData.captchaInput,"elementPath",t)},expression:"detailData.captchaInput.elementPath"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("路径类型：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.detailData.captchaInput.elementPathType,callback:function(t){e.$set(e.detailData.captchaInput,"elementPathType",t)},expression:"detailData.captchaInput.elementPathType"}},e._l(e.pathType,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1)]):e._e(),e._v(" "),e.detailData.captchaImg?a("div",{staticClass:"project-list-row"},[a("div",{staticClass:"third"},[a("label",{attrs:{for:""}},[e._v("验证码图片路径：")]),e._v(" "),a("el-input",{class:{active:"captchaImg"===e.isSelect},on:{focus:function(t){e.getPath("captchaImg")}},model:{value:e.detailData.captchaImg.elementPath,callback:function(t){e.$set(e.detailData.captchaImg,"elementPath",t)},expression:"detailData.captchaImg.elementPath"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("路径类型：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.detailData.captchaImg.elementPathType,callback:function(t){e.$set(e.detailData.captchaImg,"elementPathType",t)},expression:"detailData.captchaImg.elementPathType"}},e._l(e.pathType,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1)]):e._e(),e._v(" "),e.detailData.captchaRefresh?a("div",{staticClass:"project-list-row"},[a("div",{staticClass:"third"},[a("label",{attrs:{for:""}},[e._v("验证码刷新路径：")]),e._v(" "),a("el-input",{class:{active:"captchaRefresh"===e.isSelect},on:{focus:function(t){e.getPath("captchaRefresh")}},model:{value:e.detailData.captchaRefresh.elementPath,callback:function(t){e.$set(e.detailData.captchaRefresh,"elementPath",t)},expression:"detailData.captchaRefresh.elementPath"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("路径类型：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.detailData.captchaRefresh.elementPathType,callback:function(t){e.$set(e.detailData.captchaRefresh,"elementPathType",t)},expression:"detailData.captchaRefresh.elementPathType"}},e._l(e.pathType,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1)]):e._e()]),e._v(" "),a("p",{staticClass:"project-title"},[e._v("\n      登录成功条件判断\n      "),a("el-switch",{attrs:{"active-color":"#0487fe","inactive-color":"#ccd0d3","active-text":"是否自定义","active-value":1,"inactive-value":0},model:{value:e.detailData.isCustomTestSuccess,callback:function(t){e.$set(e.detailData,"isCustomTestSuccess",t)},expression:"detailData.isCustomTestSuccess"}})],1),e._v(" "),a("div",{staticClass:"project-list"},[a("div",{staticClass:"project-list-row"},[a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("判断URL：")]),e._v(" "),a("el-input",{model:{value:e.detailData.testSuccessUrl,callback:function(t){e.$set(e.detailData,"testSuccessUrl",t)},expression:"detailData.testSuccessUrl"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("加载时间：")]),e._v(" "),a("el-input",{model:{value:e.detailData.testSuccessUrlLoadTime,callback:function(t){e.$set(e.detailData,"testSuccessUrlLoadTime",t)},expression:"detailData.testSuccessUrlLoadTime"}})],1)]),e._v(" "),1===e.detailData.isCustomTestSuccess?a("div",{staticClass:"project-list-row all"},[a("label",{attrs:{for:""}},[e._v("自定义脚本：")]),e._v(" "),a("el-input",{attrs:{type:"textarea",rows:3,resize:"none",placeholder:"请输入自定义获取脚本"},model:{value:e.detailData.customTestSuccessScript,callback:function(t){e.$set(e.detailData,"customTestSuccessScript",t)},expression:"detailData.customTestSuccessScript"}})],1):a("div",{staticClass:"project-list-row"},[e.detailData.success?[a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("路径：")]),e._v(" "),a("el-input",{class:{active:"success"===e.isSelect},on:{focus:function(t){e.getPath("success")}},model:{value:e.detailData.success.elementPath,callback:function(t){e.$set(e.detailData.success,"elementPath",t)},expression:"detailData.success.elementPath"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("路径类型：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.detailData.success.elementPathType,callback:function(t){e.$set(e.detailData.success,"elementPathType",t)},expression:"detailData.success.elementPathType"}},e._l(e.pathType,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("属性：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.detailData.success.elementAttributeName,callback:function(t){e.$set(e.detailData.success,"elementAttributeName",t)},expression:"detailData.success.elementAttributeName"}},e._l(e.valueName,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1)]:e._e(),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("属性包含：")]),e._v(" "),a("el-input",{model:{value:e.detailData.testSuccessContainValue,callback:function(t){e.$set(e.detailData,"testSuccessContainValue",t)},expression:"detailData.testSuccessContainValue"}})],1)],2)])]),e._v(" "),a("section",{staticClass:"project-preview"},[a("p",{staticClass:"project-title"},[e._v("系统预览")]),e._v(" "),a("div",{directives:[{name:"blank",rawName:"v-blank",value:e.blankClick,expression:"blankClick"}],staticClass:"project-title-except",attrs:{id:"iframeBox"}},[a("iframe",{attrs:{id:"iframe",name:"iframe",src:"",frameborder:"0"}})])])])},staticRenderFns:[]},u=a("VU/8")(c,r,!1,null,null,null);t.default=u.exports},"5zde":function(e,t,a){a("zQR9"),a("qyJz"),e.exports=a("FeBl").Array.from},Gu7T:function(e,t,a){"use strict";t.__esModule=!0;var i,s=a("c/Tr"),l=(i=s)&&i.__esModule?i:{default:i};t.default=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return(0,l.default)(e)}},IiXI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container project"},[t("management-list",{attrs:{loginData:this.loginData,interfaceData:this.interfaceData}}),this._v(" "),t("router-view",{on:{"update-list":this.updateList}})],1)},staticRenderFns:[]},s=a("VU/8")({name:"project",data:function(){return{loginData:[],interfaceData:[]}},created:function(){this.loginList(),this.interfaceList()},methods:{loginList:function(){var e=this;this.$axios.post("/autoLogin/list","",function(t){e.loginData=t.data})},interfaceList:function(){var e=this;this.$axios.post("/interface/list","",function(t){e.interfaceData=t.data})},updateList:function(e){this.loginList(),this.interfaceList()}}},i,!1,null,null,null);t.default=s.exports},O3QS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Gu7T"),s=a.n(i),l={name:"index",data:function(){return{loginData:[],interfaceData:[],isPublishedData:[],tableHeight:500}},created:function(){this.loginList(),this.interfaceList(),this.isPublishedList()},methods:{loginList:function(){var e=this;this.$axios.post("/autoLogin/list","",function(t){e.loginData=[].concat(s()(t.data),s()(t.data))})},interfaceList:function(e){var t=this;this.$axios.post("/interface/list","",function(e){t.interfaceData=e.data})},isPublishedList:function(){var e=this,t=new URLSearchParams;t.append("isPublished",1),this.$axios.post("/interface/list",t,function(t){e.isPublishedData=[].concat(s()(t.data),s()(t.data),s()(t.data),s()(t.data),s()(t.data))})},changeEnable:function(e){var t=new URLSearchParams;t.append("id",e.id),t.append("isEnable",e.isEnable?0:1),this.$axios.post("/interface/enable",t,function(t){e.isEnable?e.isEnable=0:e.isEnable=1})}},mounted:function(){}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"management-list-except index"},[a("section",{staticClass:"index-login"},[a("p",{staticClass:"index-login-title"},[e._v("项目运行预览")]),e._v(" "),a("div",{staticClass:"index-login-box"},[a("el-scrollbar",[a("ul",{staticClass:"system-list"},e._l(e.loginData,function(t,i){return a("li",{key:i,staticClass:"system-list-item"},[a("div",{staticClass:"system-list-box"},[a("iframe",{attrs:{name:"myframe",src:t.targetUrl,frameborder:"0"}})]),e._v(" "),a("p",{staticClass:"system-list-name"},[e._v(e._s(t.autoLoginName))])])}),0)])],1)]),e._v(" "),a("section",{staticClass:"index-interface"},[a("div",{staticClass:"index-interface-title"},[a("p",{staticClass:"lf"},[e._v("已发布接口列表 ("+e._s(e.interfaceData.length)+")")]),e._v(" "),e._m(0)]),e._v(" "),a("div",{ref:"tableBox",staticClass:"index-interface-box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{height:"100%",data:e.isPublishedData,"max-height":"100%"}},[a("el-table-column",{attrs:{align:"center",prop:"name",label:"接口名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"url",label:"URL地址"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"publishTime",label:"发布时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"loginName",label:"登录系统"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?a("p",{staticClass:"normal"},[a("i"),e._v("\n              正常\n            ")]):1===t.row.status?a("p",{staticClass:"abnormal"},[a("i"),e._v("\n              异常\n            ")]):a("p",{staticClass:"stop"},[a("i"),e._v("\n              停用\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#0487fe","inactive-color":"#ccd0d3","active-value":1,"inactive-value":0,disabled:""},nativeOn:{click:function(a){e.changeEnable(t.row)}},model:{value:t.row.isEnable,callback:function(a){e.$set(t.row,"isEnable",a)},expression:"scope.row.isEnable"}})]}}])})],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{staticClass:"rt"},[t("li",{staticClass:"normal"},[t("i"),this._v("\n          正常\n        ")]),this._v(" "),t("li",{staticClass:"abnormal"},[t("i"),this._v("\n          异常\n        ")]),this._v(" "),t("li",{staticClass:"stop"},[t("i"),this._v("\n          停用\n        ")])])}]},o=a("VU/8")(l,n,!1,null,null,null);t.default=o.exports},"c/Tr":function(e,t,a){e.exports={default:a("5zde"),__esModule:!0}},fBQ2:function(e,t,a){"use strict";var i=a("evD5"),s=a("X8DO");e.exports=function(e,t,a){t in e?i.f(e,t,s(0,a)):e[t]=a}},qyJz:function(e,t,a){"use strict";var i=a("+ZMJ"),s=a("kM2E"),l=a("sB3e"),n=a("msXi"),o=a("Mhyx"),c=a("QRG4"),r=a("fBQ2"),u=a("3fs2");s(s.S+s.F*!a("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,s,d,v=l(e),m="function"==typeof this?this:Array,p=arguments.length,h=p>1?arguments[1]:void 0,f=void 0!==h,_=0,b=u(v);if(f&&(h=i(h,p>2?arguments[2]:void 0,2)),void 0==b||m==Array&&o(b))for(a=new m(t=c(v.length));t>_;_++)r(a,_,f?h(v[_],_):v[_]);else for(d=b.call(v),a=new m;!(s=d.next()).done;_++)r(a,_,f?n(d,h,[s.value,_],!0):s.value);return a.length=_,a}})},v2XQ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("pFYg"),s=a.n(i),l=a("mtWM"),n=a.n(l),o={getAbsolutelyPosition:function(e){var t=e.getBoundingClientRect(),a=Math.max(document.documentElement.scrollTop,document.body.scrollTop),i=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);return{left:t.left+i,top:t.top+a}},getElementLineIndex:function(e,t){for(var a=1,i=[].slice.call(e.children),s=0;s<i.length;s+=1)if(i[s]===t)return a=s+1;return a},getTopParentPath:function(e){var t="",a=e.nodeName.toLowerCase();if("html"===a)return t;var i=e.className.split(" "),s=""===(i=i.filter(function(e){return e&&e.trim()}).join("."))?"":"."+i,l=":nth-child("+this.getElementLineIndex(e.parentNode,e)+")";return t=a+s,t="body"===a?t:this.getTopParentPath(e.parentNode)+">"+t+l}},c={name:"projectInterface",data:function(){return{detailData:{id:"",interfaceName:"",targetUrl:"",targetUrlLoadTime:"",autoLoginId:"",remark:""},tableData:[],pathType:[],valueName:[],valueType:[],logins:[],isSelect:"",isVisible:!1,textarea:"",currentRow:"",sPath:"",parentNodeX:"",parentNodeY:""}},created:function(){this.interfaceDetail(),this.interfaceSelect()},watch:{$route:function(e,t){this.isSelect="",this.interfaceDetail()}},directives:{blank:{bind:function(e,t,a){function i(a){if(e.contains(a.target))return!1;t.expression&&t.value(a)}e.__vueClickOutside__=i,document.addEventListener("click",i)},update:function(){},unbind:function(e,t){document.removeEventListener("click",e.__vueClickOutside__),delete e.__vueClickOutside__}}},methods:{importScript:function(e,t){this.isVisible=!0,this.currentRow=e,this.textarea=t.customScript},confirmSave:function(){this.tableData[this.currentRow].customScript=this.textarea,this.isVisible=!1},cancellation:function(){this.isVisible=!1,this.currentRow="",this.textarea=""},interfaceDetail:function(){var e=this;if(this.$route.query.id){var t=new URLSearchParams;t.append("id",this.$route.query.id),this.$axios.post("/interface/detail",t,function(t){for(var a in e.detailData=t.data,t.data)"object"!==s()(e.detailData[a])&&(e.detailData[a]=t.data[a]);e.tableData=t.data.items,e.$nextTick(function(){e.iFrameLoad(e.iFrameShow)})})}else this.interfaceEmpty()},interfaceSelect:function(){var e=this;this.$axios.post("/interface/selectData","",function(t){e.pathType=t.pathTypes,e.valueName=t.valueNames,e.valueType=t.valueTypes,t.logins.unshift({name:"不需要登录",value:""}),e.logins=t.logins})},interfaceEmpty:function(){this.detailData={id:"",interfaceName:"",targetUrl:"",targetUrlLoadTime:"",autoLoginId:"",remark:""},this.tableData=[]},addRow:function(){this.tableData.push({customScript:"",elementAttributeName:"",elementPath:"",elementPathType:"",isCustom:0,subOrder:"",valueSaveAsType:"",valueSaveToKey:""})},deleteRow:function(e,t){this.tableData.splice(e,1)},changeCustom:function(e,t){console.log(e,t)},getPath:function(e){this.isSelect=e},blankClick:function(e){window.selectMask.remove()},interfacePublish:function(){var e=this,t=new URLSearchParams;t.append("id",this.$route.query.id||""),t.append("isPublish",1),this.$axios.post("/interface/publish",t,function(t){e.$message.success(t.message)})},interfaceTest:function(){var e=this.baseConfig.TAILOR_URL+"/tailor/wisemotion/testrun?id="+this.detailData.id+"&type=0 ";n.a.post(e).then(function(e){console.log(e)})},interfaceSave:function(){var e=this,t=new URLSearchParams;for(var a in this.detailData)"object"!==s()(this.detailData[a])&&"createdTime"!==a&&"createUser"!==a&&t.append(a,this.detailData[a]);console.log(this.tableData),this.tableData.forEach(function(e,a){for(var i in e)"subOrder"!==i&&t.append("items["+a+"]."+i,e[i])}),this.$axios.post("/interface/save",t,function(t){e.$message.success(t.message),e.$route.query.id||e.$emit("update-list",!0)})},iFrameLoad:function(e){var t=document.getElementById("iframe"),a=t.contentWindow.document;if(this.$route.query.id){var i="http://192.168.2.11:8070/tailor/wisemotion/snapshot?"+("snapshot_url="+this.detailData.targetUrl)+("&snapshot_login_id="+this.detailData.id);n.a.get(i).then(function(i){a.body.innerHTML=i.data,t.style.height=a.body.offsetHeight,console.log(a.body.offsetHeight),e&&e()})}else setTimeout(function(){a.body.innerHTML=""},4)},maskClick:function(e){e.preventDefault(),this.tableData[this.isSelect].elementPath=this.sPath,window.selectMask.remove()},mouseEvent:function(e){e.preventDefault();var t=(e||window.event).target,a=this.parentNodeX+1*o.getAbsolutelyPosition(t).left,i=this.parentNodeY+1*o.getAbsolutelyPosition(t).top,s=1*t.offsetWidth,l=1*t.offsetHeight,n=t.nodeName.toLowerCase(),c=(""===t.id?"":"#"+t.id)+(""===t.className?"":"."+t.className);(this.isSelect||0===this.isSelect)&&(window.selectMask.show(s,l,a,i,"rgba(101, 177, 247, 0.5)",n,c),this.sPath=o.getTopParentPath(t))},iFrameShow:function(){var e=document.getElementById("iframe"),t=e.contentWindow.document;this.parentNodeX=1*o.getAbsolutelyPosition(e.parentNode).left,this.parentNodeY=1*o.getAbsolutelyPosition(e.parentNode).top,this.iFrameRemove(),t.addEventListener("mousemove",this.mouseEvent,!1),document.getElementById("iMask").addEventListener("click",this.maskClick),t.addEventListener("click",function(e){e.preventDefault()})},iFrameRemove:function(){document.getElementById("iframe").contentWindow.document.removeEventListener("mousemove",this.mouseEvent,!1),document.getElementById("iMask").removeEventListener("click",this.maskClick)}},mounted:function(){},destroyed:function(){this.iFrameRemove()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"management-list-except project-interface"},[a("section",{staticClass:"project-header"},[a("p",{staticClass:"project-header-name"},[e._v("\n      接口管理 "),a("span",[e._v("["+e._s(e.detailData.interfaceName||"新增接口")+"]")])]),e._v(" "),a("div",{staticClass:"rt"},[e._v("\n      发布地址：\n      "),a("el-input"),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.interfacePublish}},[e._v("发布")])],1)]),e._v(" "),a("section",{staticClass:"project-info"},[a("p",{staticClass:"project-title"},[e._v("接口信息")]),e._v(" "),a("div",{staticClass:"project-info-control"},[a("p",{staticClass:"info"},[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",[e._v("创建时间： "+e._s(e.detailData.createdTime))]),e._v(" "),a("i",{staticClass:"el-icon-user"}),e._v(" "),a("span",[e._v("创建账号： "+e._s(e.detailData.createUser))])]),e._v(" "),a("div",{staticClass:"button-group"},[a("el-button",{attrs:{type:"primary"},on:{click:e.interfaceTest}},[e._v("测试")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.interfaceSave}},[e._v("保存")])],1)]),e._v(" "),a("div",{staticClass:"project-list"},[a("div",{staticClass:"project-list-row"},[a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("接口名称：")]),e._v(" "),a("el-input",{model:{value:e.detailData.interfaceName,callback:function(t){e.$set(e.detailData,"interfaceName",t)},expression:"detailData.interfaceName"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("URL地址：")]),e._v(" "),a("el-input",{on:{blur:e.iFrameLoad},model:{value:e.detailData.targetUrl,callback:function(t){e.$set(e.detailData,"targetUrl",t)},expression:"detailData.targetUrl"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("加载时间：")]),e._v(" "),a("el-input",{model:{value:e.detailData.targetUrlLoadTime,callback:function(t){e.$set(e.detailData,"targetUrlLoadTime",t)},expression:"detailData.targetUrlLoadTime"}})],1),e._v(" "),a("div",{staticClass:"quarter"},[a("label",{attrs:{for:""}},[e._v("登录选项：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.detailData.autoLoginId,callback:function(t){e.$set(e.detailData,"autoLoginId",t)},expression:"detailData.autoLoginId"}},e._l(e.logins,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1)]),e._v(" "),a("div",{staticClass:"project-list-row"},[a("div",{staticClass:"half"},[a("label",{attrs:{for:""}},[e._v("备注：")]),e._v(" "),a("el-input",{attrs:{resize:"none",autosize:{minRows:3},type:"textarea"},model:{value:e.detailData.remark,callback:function(t){e.$set(e.detailData,"remark",t)},expression:"detailData.remark"}})],1)])]),e._v(" "),a("div",{staticClass:"project-info-table"},[a("p",{staticClass:"table-control",on:{click:e.addRow}},[a("i",{staticClass:"el-icon-circle-plus"}),e._v(" "),a("span",[e._v("新增一行")])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"max-height":"250"}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"valueSaveToKey",label:"属性名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.valueSaveToKey,callback:function(a){e.$set(t.row,"valueSaveToKey",a)},expression:"scope.row.valueSaveToKey"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"自定义接口"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#0487fe","inactive-color":"#ccd0d3","active-value":1,"inactive-value":0},on:{change:function(a){e.changeCustom(a,t.row)}},model:{value:t.row.isCustom,callback:function(a){e.$set(t.row,"isCustom",a)},expression:"scope.row.isCustom"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"160",align:"center",prop:"elementPath",label:"值路径"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.isCustom?a("el-input",{class:{active:e.isSelect===t.$index},on:{focus:function(a){e.getPath(t.$index)}},model:{value:t.row.elementPath,callback:function(a){e.$set(t.row,"elementPath",a)},expression:"scope.row.elementPath"}}):a("el-button",{on:{click:function(a){e.importScript(t.$index,t.row)}}},[e._v("导入自定义脚本")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"180",align:"center",prop:"elementPathType",label:"值路径类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.isCustom?a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.elementPathType,callback:function(a){e.$set(t.row,"elementPathType",a)},expression:"scope.row.elementPathType"}},e._l(e.pathType,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1):void 0]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"140",align:"center",prop:"elementAttributeName",label:"值属性名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.isCustom?a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.elementAttributeName,callback:function(a){e.$set(t.row,"elementAttributeName",a)},expression:"scope.row.elementAttributeName"}},e._l(e.valueName,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1):void 0]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"140",align:"center",prop:"valueSaveAsType",label:"值类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.isCustom?a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.valueSaveAsType,callback:function(a){e.$set(t.row,"valueSaveAsType",a)},expression:"scope.row.valueSaveAsType"}},e._l(e.valueType,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1):void 0]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"获取结果"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"删除"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"delete-button",on:{click:function(a){e.deleteRow(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-delete"})])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"自定义脚本",top:"0","custom-class":"custom-dialog",visible:e.isVisible},on:{"update:visible":function(t){e.isVisible=t}}},[a("el-input",{attrs:{type:"textarea",rows:10,resize:"none",placeholder:"请输入自定义获取脚本"},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirmSave}},[e._v("保 存")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.cancellation}},[e._v("取 消")])],1)],1)],1)]),e._v(" "),a("section",{staticClass:"project-preview"},[a("p",{staticClass:"project-title"},[e._v("系统预览")]),e._v(" "),a("div",{directives:[{name:"blank",rawName:"v-blank",value:e.blankClick,expression:"blankClick"}],staticClass:"project-title-except",attrs:{id:"iframeBox"}},[a("iframe",{attrs:{id:"iframe",name:"iframe",src:"",frameborder:"0"}})])])])},staticRenderFns:[]},u=a("VU/8")(c,r,!1,null,null,null);t.default=u.exports}});